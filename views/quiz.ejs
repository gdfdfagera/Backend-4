<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timed Quiz</title>
</head>
<body>
    <h1>Crypto and Finance Quiz</h1>

    <div id="timer">Time Remaining: <span id="countdown"></span></div>
  
    <form action="/quiz" id="quizForm" method="post">
      <div class="question">
        <p>1. What does the term 'HODL' mean in the context of cryptocurrencies?</p>
        <input type="radio" name="q1" value="a"> a) Hold On for Dear Life<br>
        <input type="radio" name="q1" value="b"> b) High Octane Digital Ledger<br>
        <input type="radio" name="q1" value="c"> c) Hyperlink Object Data Locator<br>
      </div>
  
      <div class="question">
        <p>2. Which cryptocurrency is known as the "digital gold"?</p>
        <input type="radio" name="q2" value="a"> a) Ethereum<br>
        <input type="radio" name="q2" value="b"> b) Bitcoin<br>
        <input type="radio" name="q2" value="c"> c) Ripple<br>
      </div>
  
      <div class="question">
        <p>3. What is the purpose of a 'white paper' in the crypto world?</p>
        <input type="radio" name="q3" value="a"> a) Technical documentation of a cryptocurrency project<br>
        <input type="radio" name="q3" value="b"> b) Legal contract for crypto transactions<br>
        <input type="radio" name="q3" value="c"> c) Marketing brochure for a crypto exchange<br>
      </div>
  
      <div class="question">
        <p>4. What is the significance of the Dow Jones Industrial Average (DJIA) in finance?</p>
        <input type="radio" name="q4" value="a"> a) Measures the performance of technology stocks<br>
        <input type="radio" name="q4" value="b"> b) Tracks the overall performance of the stock market<br>
        <input type="radio" name="q4" value="c"> c) Indicates the price of gold<br>
      </div>
  
      <div class="question">
        <p>5. What is a 'bear market'?</p>
        <input type="radio" name="q5" value="a"> a) A market with increasing prices<br>
        <input type="radio" name="q5" value="b"> b) A market with decreasing prices<br>
        <input type="radio" name="q5" value="c"> c) A market with stable prices<br>
      </div>
  
      <button type="submit">Submit Quiz</button>
    </form>

  <script>
    console.log('DOMContentLoaded event fired');
    const countdownTime = 10;

    let timeLeft = countdownTime;
    const countdownElement = document.getElementById('countdown');

    function updateCountdown() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      countdownElement.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }

    function submitQuiz() {
      console.log('Submitting quiz');
      const quizForm = document.getElementById('quizForm');
      const formData = new FormData(quizForm);

      fetch('/quiz', {
        method: 'POST',
        body: formData,
      })
        .then(response => {
          if (response.ok) {
              window.location.href = '/quizScore';
          } else {
              console.error('Error submitting quiz. Status:', response.status);
          }
        })
        .catch(error => {
          console.error('Error submitting quiz:', error);
        });
    }

    function startCountdown() {
      console.log('Countdown started');
      const countdownInterval = setInterval(() => {
        if (timeLeft > 0) {
          timeLeft--;
          updateCountdown();
        } else {
          clearInterval(countdownInterval);
          submitQuiz();
        }
      }, 1000);
    }

    startCountdown();
  </script>
</body>
</html>